app:
  description: ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ãƒªã‚¹ãƒˆã«å¯¾ã—ã¦ãƒãƒƒãƒAPIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã€ä¾¡æ ¼ãƒ‡ãƒ¼ã‚¿ã‚’é›†ç´„ãƒ»åˆ†æã—ã¦æœ€é©ãªã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã‚’æ¨å¥¨ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã€‚
  icon: ğŸ“¦
  icon_background: '#E8EAF6'
  mode: workflow
  name: 'V13: ãƒãƒƒãƒAPI + é›†ç´„ â€” ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ä¾¡æ ¼æ¯”è¼ƒ'
workflow:
  environment_variables: []
  conversation_variables: []
  features:
    file_upload:
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: true
      type: keywords
      config:
        keywords: 'çˆ†å¼¾

          æ®ºå®³

          é•æ³•è–¬ç‰©

          ãƒãƒƒã‚­ãƒ³ã‚°æ‰‹æ³•'
        inputs_config:
          enabled: true
          preset_response: ãã®å†…å®¹ã«ã¯ãŠç­”ãˆã§ãã¾ã›ã‚“ã€‚åˆ¥ã®è³ªå•ã‚’ãŠé¡˜ã„ã—ã¾ã™ã€‚
        outputs_config:
          enabled: true
          preset_response: é©åˆ‡ãªå›ç­”ã‚’ç”Ÿæˆã§ãã¾ã›ã‚“ã§ã—ãŸã€‚è³ªå•ã‚’å¤‰ãˆã¦ãã ã•ã„ã€‚
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        sourceType: start
        targetType: code
      id: e-13000000000001-13000000000002
      source: '13000000000001'
      sourceHandle: source
      target: '13000000000002'
      targetHandle: target
      type: custom
    - data:
        sourceType: code
        targetType: iteration
      id: e-13000000000002-13000000000003
      source: '13000000000002'
      sourceHandle: source
      target: '13000000000003'
      targetHandle: target
      type: custom
    - data:
        sourceType: iteration
        targetType: code
      id: e-13000000000003-13000000000005
      source: '13000000000003'
      sourceHandle: source
      target: '13000000000005'
      targetHandle: target
      type: custom
    - data:
        sourceType: code
        targetType: llm
      id: e-13000000000005-13000000000006
      source: '13000000000005'
      sourceHandle: source
      target: '13000000000006'
      targetHandle: target
      type: custom
    - data:
        sourceType: llm
        targetType: end
      id: e-13000000000006-13000000000007
      source: '13000000000006'
      sourceHandle: source
      target: '13000000000007'
      targetHandle: target
      type: custom
    nodes:
    - data:
        type: start
        title: é–‹å§‹
        desc: ''
        variables:
        - variable: part_number
          label: part_number
          type: text-input
          required: true
          max_length: 100
        - variable: suppliers
          label: suppliers
          type: text-input
          required: true
          max_length: 1000
      id: '13000000000001'
      type: custom
      position:
        x: 80
        y: 282
      positionAbsolute:
        x: 80
        y: 282
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
    - data:
        type: code
        title: ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼é…åˆ—åŒ–
        desc: ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ãƒªã‚¹ãƒˆã‚’é…åˆ—ã«å¤‰æ›
        code_language: python3
        code: "def main(suppliers: str) -> dict:\n    items = [s.strip() for s in\
          \ suppliers.split(',') if s.strip()]\n    return {'items': items}\n"
        variables:
        - variable: suppliers
          value_selector:
          - '13000000000001'
          - suppliers
        outputs:
          items:
            type: array[string]
      id: '13000000000002'
      type: custom
      position:
        x: 380
        y: 282
      positionAbsolute:
        x: 380
        y: 282
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
    - data:
        type: iteration
        title: ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã‚¤ãƒ†ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
        desc: å„ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã«å¯¾ã—ã¦APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®Ÿè¡Œ
        iterator_selector:
        - '13000000000002'
        - items
        output_selector:
        - '13000000000004'
        - body
        parallel_mode: true
        error_handle_mode: continue-on-error
        start_node_id: '13000000000004'
      id: '13000000000003'
      type: custom
      position:
        x: 680
        y: 282
      positionAbsolute:
        x: 680
        y: 282
      height: 200
      width: 400
      sourcePosition: right
      targetPosition: left
      selected: false
    - data:
        type: http-request
        title: ä¾¡æ ¼è¦‹ç©API
        desc: ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã®ä¾¡æ ¼è¦‹ç©ã‚‚ã‚Šã‚’å–å¾—
        method: get
        url: https://api.example.com/quote?part={{#13000000000001.part_number#}}&supplier={{#13000000000003.items#}}
        authorization:
          type: no-auth
        headers: ''
        params: ''
        body:
          type: none
          data: ''
        timeout:
          connect: 10
          read: 60
          write: 10
        retry:
          max_retries: 3
          retry_interval: 1000
      id: '13000000000004'
      type: custom
      position:
        x: 740
        y: 340
      positionAbsolute:
        x: 740
        y: 340
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
      parentId: '13000000000003'
    - data:
        type: code
        title: çµæœé›†ç´„
        desc: APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’é›†ç´„ã—ã¦åˆ†æç”¨ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆ
        code_language: python3
        code: "import json\n\ndef main(api_results: list) -> dict:\n    summary_lines\
          \ = []\n    for i, result in enumerate(api_results):\n        try:\n   \
          \         data = json.loads(result) if isinstance(result, str) else result\n\
          \            supplier = data.get('supplier', f'Supplier {i+1}')\n      \
          \      price = data.get('price', 'N/A')\n            lead_time = data.get('lead_time_days',\
          \ 'N/A')\n            availability = data.get('availability', 'N/A')\n \
          \           summary_lines.append(\n                f\"ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼: {supplier},\
          \ \"\n                f\"ä¾¡æ ¼: {price}, \"\n                f\"ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ : {lead_time}æ—¥,\
          \ \"\n                f\"åœ¨åº«çŠ¶æ³: {availability}\"\n            )\n       \
          \ except Exception:\n            summary_lines.append(f\"ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ {i+1}: ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼\"\
          )\n    summary = '\\n'.join(summary_lines)\n    return {'summary': summary}\n"
        variables:
        - variable: api_results
          value_selector:
          - '13000000000003'
          - output
        outputs:
          summary:
            type: string
      id: '13000000000005'
      type: custom
      position:
        x: 1180
        y: 282
      positionAbsolute:
        x: 1180
        y: 282
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
    - data:
        type: llm
        title: æœ€é©ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼åˆ†æ
        desc: é›†ç´„ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—æœ€é©ãªã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã‚’æ¨å¥¨
        model:
          provider: openai
          name: gpt-4o-mini
          mode: chat
          completion_params:
            temperature: 0.3
        prompt_template:
        - id: prompt_supplier_sys
          role: system
          text: 'ã‚ãªãŸã¯èª¿é”ãƒ»è³¼è²·ã®å°‚é–€å®¶ã§ã™ã€‚ä»¥ä¸‹ã®ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼è¦‹ç©ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã€æœ€é©ãªã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã‚’æ¨å¥¨ã—ã¦ãã ã•ã„ã€‚


            ä»¥ä¸‹ã®è¦³ç‚¹ã§è©•ä¾¡ã—ã¦ãã ã•ã„ï¼š

            1. ã‚³ã‚¹ãƒˆï¼ˆä¾¡æ ¼ã®ç«¶äº‰åŠ›ï¼‰

            2. ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ï¼ˆç´æœŸã®çŸ­ã•ï¼‰

            3. åœ¨åº«çŠ¶æ³ï¼ˆå³ç´å¯èƒ½ã‹ï¼‰


            æœ€çµ‚çš„ã«æ¨å¥¨ã‚µãƒ—ãƒ©ã‚¤ãƒ¤ãƒ¼ã¨ãã®ç†ç”±ã‚’æ˜ç¢ºã«è¿°ã¹ã¦ãã ã•ã„ã€‚'
        - id: prompt_supplier_user
          role: user
          text: '{{#13000000000005.summary#}}'
        memory: null
        context:
          enabled: false
          variable_selector: []
        vision:
          enabled: false
      id: '13000000000006'
      type: custom
      position:
        x: 1480
        y: 282
      positionAbsolute:
        x: 1480
        y: 282
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
    - data:
        type: end
        title: çµ‚äº†
        desc: ''
        outputs:
        - variable: recommendation
          value_selector:
          - '13000000000006'
          - text
      id: '13000000000007'
      type: custom
      position:
        x: 1780
        y: 282
      positionAbsolute:
        x: 1780
        y: 282
      height: 97
      width: 243
      sourcePosition: right
      targetPosition: left
      selected: false
